<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cable Tester UI Mockup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            overflow: auto;
        }

        .fill-bar {
            height: 0%;
            transition: height 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .slide-out-left {
            transform: translateX(-100%);
            opacity: 0;
        }

        .logo-scanner-path-1 {
            fill: none;
            stroke: #60a5fa;
            stroke-width: 3px;
            stroke-dasharray: 2 8 6 12 16 8 2 16;
            stroke-linecap: round;
            animation: crawl-1 10s linear infinite;
        }

        .logo-scanner-path-2 {
            fill: none;
            stroke: #93c5fd;
            stroke-width: 4px;
            stroke-dasharray: 10 4 2 10 20 8 5 12;
            stroke-linecap: round;
            animation: crawl-2 14s linear infinite;
        }

        @keyframes crawl-1 {
            from {
                stroke-dashoffset: 0;
            }

            to {
                stroke-dashoffset: -1120;
            }
        }

        @keyframes crawl-2 {
            from {
                stroke-dashoffset: 0;
            }

            to {
                stroke-dashoffset: 1136;
            }
        }

        #test-log-list::-webkit-scrollbar {
            width: 8px;
        }

        #test-log-list::-webkit-scrollbar-track {
            background: #1f2937;
            border-radius: 10px;
        }

        #test-log-list::-webkit-scrollbar-thumb {
            background: #3b82f6;
            border-radius: 10px;
        }

        #test-log-list::-webkit-scrollbar-thumb:hover {
            background: #2563eb;
        }

        #test-log-list {
            scrollbar-width: thin;
            scrollbar-color: #3b82f6 #1f2937;
        }
    </style>
</head>

<body class="bg-gray-700 w-screen min-h-screen flex flex-col items-center justify-center p-8">

    <div id="device-wrapper"
        class="w-[800px] h-[480px] bg-gray-900 text-white p-8 rounded-lg shadow-2xl overflow-hidden relative">
        <div id="ui-container" class="w-full h-full flex items-center gap-8 transition-all duration-300 ease-in-out">


            <div id="left-column-container"
                class="w-1/3 h-full flex flex-col items-center justify-start pt-8 transition-all duration-300 ease-in-out">

                <div id="logo-button-wrapper"
                    class="w-44 h-32 relative flex-shrink-0 items-center justify-center cursor-pointer transition-all duration-300 ease-in-out">

                    <div id="logo-button"
                        class="w-full h-full rounded-2xl border-4 border-blue-500 flex items-center justify-center text-center p-4 shadow-xl hover:shadow-blue-500/50 transition-shadow relative z-10 bg-gray-900">
                        <span class="relative z-10 text-lg font-bold">
                            Cable Tester:<br>DB9 To BNC
                            <span class="block text-sm font-normal text-blue-300 mt-2">(Tap to begin test)</span>
                        </span>
                    </div>

                    <div class="absolute -inset-6 w-56 h-44 z-0">
                        <svg class="w-full h-full" viewBox="0 0 320 256" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M 44 24 H 276 A 20 20 0 0 1 296 44 V 212 A 20 20 0 0 1 276 232 H 44 A 20 20 0 0 1 24 212 V 44 A 20 20 0 0 1 44 24 Z"
                                class="logo-scanner-path-1" />
                            <path
                                d="M 44 16 H 276 A 28 28 0 0 1 304 44 V 212 A 28 28 0 0 1 276 240 H 44 A 28 28 0 0 1 16 212 V 44 A 28 28 0 0 1 44 16 Z"
                                class="logo-scanner-path-2" />
                        </svg>
                    </div>
                </div>

                <div id="controls-container"
                    class="transition-all duration-300 ease-in-out mt-8 w-full flex-grow h-0 flex flex-col">
                    <div class="flex flex-col gap-2">
                        <div class="flex items-center">
                            <input id="simulate-fail-checkbox-1" type="checkbox"
                                class="w-4 h-4 text-red-600 bg-gray-700 border-gray-600 rounded focus:ring-red-500">
                            <label for="simulate-fail-checkbox-1"
                                class="ml-2 text-sm font-medium text-gray-300">Simulate Fail
                                (Test 1)</label>
                        </div>
                        <div class="flex items-center">
                            <input id="simulate-fail-checkbox-2" type="checkbox"
                                class="w-4 h-4 text-red-600 bg-gray-700 border-gray-600 rounded focus:ring-red-500">
                            <label for="simulate-fail-checkbox-2"
                                class="ml-2 text-sm font-medium text-gray-300">Simulate Fail
                                (Test 2)</label>
                        </div>
                        <div class="flex items-center">
                            <input id="simulate-fail-checkbox-3" type="checkbox"
                                class="w-4 h-4 text-red-600 bg-gray-700 border-gray-600 rounded focus:ring-red-500">
                            <label for="simulate-fail-checkbox-3"
                                class="ml-2 text-sm font-medium text-gray-300">Simulate Fail
                                (Test 3)</label>
                        </div>
                    </div>

                    <div id="test-log-container" class="mt-4 w-full flex-grow h-0 flex flex-col">
                        <h3 class="text-lg font-semibold text-gray-400 mb-2 text-center flex-shrink-0">Test Log</h3>
                        <div id="test-log-list"
                            class="h-full bg-gray-800 rounded-lg p-3 overflow-y-auto flex flex-col gap-2">
                        </div>
                    </div>
                </div>
            </div>

            <div id="test-columns-container"
                class="w-2/3 h-full flex flex-col justify-start pt-8 gap-6 transition-all duration-300 ease-in-out">

                <div id="test-col-1"
                    class="bg-gray-800 rounded-lg p-6 shadow-lg h-24 flex-grow-0 flex flex-col justify-center relative overflow-hidden transition-all duration-300 ease-in-out">
                    <div class="fill-bar absolute bottom-0 left-0 w-full bg-green-500/80"></div>
                    <div class="relative z-10">
                        <h2 class="text-xl font-bold text-gray-400">Continuity</h2>
                        <p class="text-lg">DB9-Pin-6 to BNC Center</p>
                    </div>
                </div>

                <div id="test-col-2"
                    class="bg-gray-800 rounded-lg p-6 shadow-lg h-24 flex-grow-0 flex flex-col justify-center relative overflow-hidden transition-all duration-300 ease-in-out">
                    <div class="fill-bar absolute bottom-0 left-0 w-full bg-green-500/80"></div>
                    <div class="relative z-10">
                        <h2 class="text-xl font-bold text-gray-400">Continuity</h2>
                        <p class="text-lg">DB9-Pin-5 to BNC Shield</p>
                    </div>
                </div>

                <div id="test-col-3"
                    class="bg-gray-800 rounded-lg p-6 shadow-lg h-24 flex-grow-0 flex flex-col justify-center relative overflow-hidden transition-all duration-300 ease-in-out">
                    <div class="fill-bar absolute bottom-0 left-0 w-full bg-green-500/80"></div>
                    <div class="relative z-10">
                        <h2 class="text-xl font-bold text-gray-400">Resistance</h2>
                        <p class="text-lg">DB9-Pin-4 to DB9-Pin-6 (8.2KΩ)</p>
                    </div>
                </div>

            </div>
        </div>

        <div id="popup-overlay" class="hidden fixed inset-0 bg-black/70 z-40 cursor-pointer"></div>
        <div id="popup"
            class="hidden absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white text-gray-900 rounded-2xl shadow-2xl p-8 transform transition-all duration-300 scale-95 opacity-0 z-50">
            <h3 class="text-2xl font-bold text-center">Test Complete!</h3>
            <p id="popup-message" class="text-lg text-center mt-4"></p>
        </div>

        <div id="details-overlay" class="hidden fixed inset-0 bg-black/70 z-40 cursor-pointer"></div>
        <div id="details-popup"
            class="hidden absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-gray-800 text-white rounded-2xl shadow-2xl p-8 transform transition-all duration-300 scale-95 opacity-0 z-50">
            <h3 id="details-title" class="text-2xl font-bold text-center">Test Report Details</h3>
            <p id="details-filename" class="text-center text-sm font-mono text-gray-400 mt-1"></p>

            <div class="mt-6 space-y-4">
                <div id="details-test-1" class="flex justify-between items-center bg-gray-700 p-3 rounded-lg">
                    <span class="font-medium">Continuity (Pin 6-Center):</span>
                    <span id="details-val-1" class="font-bold"></span>
                </div>
                <div id="details-test-2" class="flex justify-between items-center bg-gray-700 p-3 rounded-lg">
                    <span class="font-medium">Continuity (Pin 5-Shield):</span>
                    <span id="details-val-2" class="font-bold"></span>
                </div>
                <div id="details-test-3" class="flex justify-between items-center bg-gray-700 p-3 rounded-lg">
                    <span class="font-medium">Resistance (Pin 4-6):</span>
                    <span id="details-val-3" class="font-bold"></span>
                </div>
            </div>

            <div class="mt-8 flex justify-between">
                <button id="details-delete-btn"
                    class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                    Delete Log
                </button>
                <button id="details-close-btn"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <a href="BionicCustomCableTester.7z" download
        class="mt-12 group flex flex-col items-center gap-2 text-gray-400 hover:text-blue-400 transition-all duration-300 no-underline">
        <div
            class="bg-gray-800 p-4 rounded-full shadow-lg group-hover:scale-110 group-hover:bg-gray-600 transition-all duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
        </div>
        <span class="text-sm font-semibold tracking-wider uppercase">Download Project Files</span>
        <span class="text-xs font-mono opacity-50">BionicCustomCableTester.7z</span>
    </a>


    <script>
        const uiContainer = document.getElementById('ui-container');
        const leftColumnContainer = document.getElementById('left-column-container');
        const logoButtonWrapper = document.getElementById('logo-button-wrapper');
        const controlsContainer = document.getElementById('controls-container');
        const columnsContainer = document.getElementById('test-columns-container');

        const failCheckbox1 = document.getElementById('simulate-fail-checkbox-1');
        const failCheckbox2 = document.getElementById('simulate-fail-checkbox-2');
        const failCheckbox3 = document.getElementById('simulate-fail-checkbox-3');

        const testLogList = document.getElementById('test-log-list');

        const popup = document.getElementById('popup');
        const popupOverlay = document.getElementById('popup-overlay');
        const popupMessage = document.getElementById('popup-message');

        const detailsPopup = document.getElementById('details-popup');
        const detailsOverlay = document.getElementById('details-overlay');
        const detailsFilename = document.getElementById('details-filename');
        const detailsVal1 = document.getElementById('details-val-1');
        const detailsVal2 = document.getElementById('details-val-2');
        const detailsVal3 = document.getElementById('details-val-3');
        const detailsDeleteBtn = document.getElementById('details-delete-btn');
        const detailsCloseBtn = document.getElementById('details-close-btn');

        const col1 = document.getElementById('test-col-1');
        const col2 = document.getElementById('test-col-2');
        const col3 = document.getElementById('test-col-3');

        let isTesting = false;

        function startTest() {
            if (isTesting) return;
            isTesting = true;

            const test1Result = !failCheckbox1.checked;
            const test2Result = !failCheckbox2.checked;
            const test3Result = !failCheckbox3.checked;

            let resString = "";
            if (test3Result) {
                let resVal = 8100 + Math.floor(Math.random() * 200);
                resString = `${resVal}Ω (PASS)`;
            } else {
                let resVal = 7500 + Math.floor(Math.random() * 200);
                resString = `${resVal}Ω (FAIL)`;
            }

            leftColumnContainer.classList.replace('w-1/3', 'w-0');
            logoButtonWrapper.classList.add('slide-out-left');
            controlsContainer.classList.add('slide-out-left');

            columnsContainer.classList.replace('w-2/3', 'w-full');
            uiContainer.classList.replace('gap-8', 'gap-0');
            columnsContainer.classList.replace('gap-6', 'gap-8');

            columnsContainer.classList.replace('justify-start', 'justify-around');
            columnsContainer.classList.remove('pt-8');

            [col1, col2, col3].forEach(col => {
                col.classList.remove('h-24');
                col.classList.replace('flex-grow-0', 'flex-grow');
                col.classList.replace('p-6', 'p-12');
                col.querySelector('h2').classList.add('text-3xl');
                col.querySelector('p').classList.add('text-2xl');
            });

            runTest(col1, test1Result)
                .then(() => runTest(col2, test2Result))
                .then(() => runTest(col3, test3Result))
                .then(() => {
                    const overallResult = test1Result && test2Result && test3Result;
                    const fileName = `report_${Date.now()}.pdf`;
                    showPopup(overallResult, fileName);

                    addTestLog(fileName, overallResult, {
                        test1: test1Result,
                        test2: test2Result,
                        test3: test3Result,
                        resistance: resString
                    });
                });
        }

        function runTest(columnElement, isSuccess) {
            return new Promise(resolve => {
                setTimeout(() => {
                    const bar = columnElement.querySelector('.fill-bar');
                    bar.classList.remove('bg-green-500/80', 'bg-red-500/80');
                    if (isSuccess) {
                        bar.classList.add('bg-green-500/80');
                    } else {
                        bar.classList.add('bg-red-500/80');
                    }
                    bar.style.height = '100%';
                    resolve(isSuccess);
                }, 400);
            });
        }

        function showPopup(isSuccess, fileName) {
            let message = `<span class="font-mono p-2 bg-gray-200 rounded">${fileName}</span><br>generated and saved to SD!`;
            popupMessage.innerHTML = message;
            popup.classList.remove('hidden');
            popupOverlay.classList.remove('hidden');

            setTimeout(() => {
                popup.classList.add('scale-100', 'opacity-100');
                popup.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function addTestLog(fileName, isSuccess, results) {
            const logEntry = document.createElement('div');
            logEntry.id = `log-${fileName}`;

            const statusClass = isSuccess ? 'text-blue-400' : 'text-red-400';
            logEntry.className = `bg-gray-700 rounded p-2 text-sm font-mono text-center ${statusClass} cursor-pointer hover:bg-gray-600 transition-colors flex-shrink-0`;
            logEntry.title = `Click to view details for ${fileName}`;
            logEntry.innerHTML = fileName;

            logEntry.dataset.filename = fileName;
            logEntry.dataset.test1 = String(results.test1);
            logEntry.dataset.test2 = String(results.test2);
            logEntry.dataset.test3 = String(results.test3);
            logEntry.dataset.resistance = results.resistance;

            logEntry.addEventListener('click', () => showDetailsPopup(logEntry));

            testLogList.prepend(logEntry);
        }

        function showDetailsPopup(logEntry) {
            const { filename, test1, test2, test3, resistance } = logEntry.dataset;

            detailsFilename.textContent = filename;

            const setStatus = (el, success) => {
                if (success === 'true') {
                    el.textContent = 'PASS';
                    el.className = 'font-bold text-green-400';
                } else {
                    el.textContent = 'FAIL';
                    el.className = 'font-bold text-red-400';
                }
            };

            setStatus(detailsVal1, test1);
            setStatus(detailsVal2, test2);

            detailsVal3.textContent = resistance;
            if (test3 === 'true') {
                detailsVal3.className = 'font-bold text-green-400';
            } else {
                detailsVal3.className = 'font-bold text-red-400';
            }

            detailsDeleteBtn.dataset.logId = logEntry.id;

            detailsPopup.classList.remove('hidden');
            detailsOverlay.classList.remove('hidden');

            setTimeout(() => {
                detailsPopup.classList.add('scale-100', 'opacity-100');
                detailsPopup.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function closeDetailsPopup() {
            detailsPopup.classList.remove('scale-100', 'opacity-100');
            detailsPopup.classList.add('scale-95', 'opacity-0');

            setTimeout(() => {
                detailsPopup.classList.add('hidden');
                detailsOverlay.classList.add('hidden');
            }, 300);
        }

        function deleteLogItem() {
            const logId = detailsDeleteBtn.dataset.logId;
            const logEntry = document.getElementById(logId);
            if (logEntry) {
                logEntry.remove();
            }
            closeDetailsPopup();
        }

        function resetUI() {
            if (!isTesting) return;

            popup.classList.remove('scale-100', 'opacity-100');
            popup.classList.add('scale-95', 'opacity-0');

            setTimeout(() => {
                popup.classList.add('hidden');
                popupOverlay.classList.add('hidden');

                [col1, col2, col3].forEach(col => {
                    col.querySelector('.fill-bar').style.height = '0%';
                    const bar = col.querySelector('.fill-bar');
                    bar.classList.remove('bg-red-500/80', 'bg-green-500/80');
                    bar.classList.add('bg-green-500/80');

                    col.classList.add('h-24');
                    col.classList.replace('flex-grow', 'flex-grow-0');
                    col.classList.replace('p-12', 'p-6');
                    col.querySelector('h2').classList.remove('text-3xl');
                    col.querySelector('p').classList.remove('text-2xl');
                });

                leftColumnContainer.classList.replace('w-0', 'w-1/3');
                logoButtonWrapper.classList.remove('slide-out-left');
                controlsContainer.classList.remove('slide-out-left');

                columnsContainer.classList.replace('w-full', 'w-2/3');
                uiContainer.classList.replace('gap-0', 'gap-8');
                columnsContainer.classList.replace('justify-around', 'justify-start');
                columnsContainer.classList.add('pt-8');
                columnsContainer.classList.replace('gap-8', 'gap-6');

                isTesting = false;
            }, 200);
        }

        logoButtonWrapper.addEventListener('click', startTest);
        popupOverlay.addEventListener('click', resetUI);

        detailsOverlay.addEventListener('click', closeDetailsPopup);
        detailsCloseBtn.addEventListener('click', closeDetailsPopup);
        detailsDeleteBtn.addEventListener('click', deleteLogItem);

    </script>
</body>

</html>